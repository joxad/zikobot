apply plugin: 'com.android.application'
apply plugin: 'io.fabric'
apply plugin: 'android-apt'
apply plugin: 'me.tatarka.retrolambda'


Properties properties = new Properties()
properties.load(project.rootProject.file('local.properties').newDataInputStream())
def jdk_dir = properties.getProperty('jdk.dir')
def keystore_file = properties.getProperty('keystore.file')
def file_password = properties.getProperty('file.password')
def key_alias = properties.getProperty('keystore.alias')
def key_password = properties.getProperty('keystore.password')

android {
    compileSdkVersion 23
    buildToolsVersion "23.0.3"
    dataBinding {
        enabled = true
    }
    defaultConfig {
        applicationId "com.startogamu.zikobot"
        minSdkVersion 16
        targetSdkVersion 23
        versionCode buildVersionCode()
        versionName VERSION_NAME

    }

    signingConfigs {
        release {
            storeFile file(keystore_file)
            storePassword file_password
            keyAlias key_alias
            keyPassword key_password
        }
    }
    buildTypes {
        debug {
            debuggable true
            minifyEnabled false

            applicationVariants.all { variant ->
                variant.outputs.each { output ->
                    output.outputFile = new File(output.outputFile.parent,
                            output.outputFile.name.replace("app-debug", APP_NAME + "-" + VERSION_NAME)
                    )
                }
            }
        }
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
            signingConfig signingConfigs.release
            applicationVariants.all { variant ->
                variant.outputs.each { output ->
                    output.outputFile = new File(output.outputFile.parent,
                            output.outputFile.name.replace("app-release", APP_NAME + "-" + VERSION_NAME)
                    )
                }
            }
        }

    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }


    retrolambda {
        jdk jdk_dir
    }
}
dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    testCompile 'junit:junit:4.12'


    apt libs.daggerCompiler
    apt libs.dbFlowProc
    apt libs.parceler

    compile libs.appCompat
    compile libs.butterKnife
    compile libs.circleIV
    compile libs.dagger
    compile libs.dart
    compile libs.dbFlowCore
    compile libs.dbFlow
    compile libs.design
    compile libs.dialogTimePicker
    compile libs.easyPrefs
    compile libs.easyDataBinding
    compile libs.eventBus
    compile libs.gson
    compile libs.glide
    compile libs.henson
    compile libs.easySpotify
    compile libs.materialRipple
    compile libs.okHttpInterceptor
    compile libs.parcelerApi
    compile libs.recyclerView
    compile libs.recyclerViewDataBinding
    compile libs.retrofit
    compile libs.retrofitConverterGson
    compile libs.retrofitAdapterRxJava
    compile libs.rxAndroid
    compile libs.rxBindings
    compile libs.support


    provided libs.dartProc
    provided libs.hensonProc
    provided libs.lombok
    provided libs.javaxAnnotation

    compile 'com.github.armcha:LuseenBottomNavigation:1.8.0'
    compile('com.mikepenz:aboutlibraries:5.6.2@aar') {
        transitive = true
    }
    compile 'com.cleveroad:audiovisualization:0.9.3'

    compile 'com.github.paolorotolo:appintro:4.0.0'
    //https://openclassrooms.com/courses/bruits-et-nombres-aleatoires-coherents
    compile('com.crashlytics.sdk.android:crashlytics:2.5.6@aar') {
        transitive = true;
    }


}

